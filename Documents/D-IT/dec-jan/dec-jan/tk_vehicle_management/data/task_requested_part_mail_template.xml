<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="task_requested_part_mail_template" model="mail.template">
            <field name="name">Task Requested Parts Mail Template</field>
            <field name="model_id" ref="tk_vehicle_management.model_vehicle_inspection"/>
            <field name="subject">Additional Parts Required for Services</field>
            <field name="body_html" type="html">
                <p>
                    Dear
                    <strong>
                        <span t-field="object.service_adviser_id.name"/> &amp; Team Leaders
                    </strong>
                </p>
                <hr class="mb-1 mt-1"/>
                <p>
                    While servicing the vehicle, technicians carefully inspected it and discovered additional
                    requirements that necessitate the inclusion of extra parts.
                </p>
                <p>
                    Below, you will find the details of the additional parts required, along with the revised quotation.
                    Please ask customer for review and confirmation of these changes.
                </p>
                <strong>
                    Additional Parts Details
                </strong>
                <hr class="mb-1 mt-1"/>
                <table class="table table-sm o_main_table">
                    <tr>
                        <td style="padding: 2px;border-top:0px solid white;">
                            <strong>Description</strong>
                        </td>
                        <td style="padding: 2px;border-top:0px solid white;">
                            <strong>Service</strong>
                        </td>
                        <td style="padding: 2px;border-top:0px solid white;text-align:right;">
                            <strong>Qty</strong>
                        </td>
                        <td style="padding: 2px;border-top:0px solid white;">
                            <strong>UOM</strong>
                        </td>
                    </tr>
                    <tr t-foreach="object.env.context.get('parts_details')" t-as="rs">
                        <td style="padding: 2px;">
                            <span t-field="rs.name"/>
                        </td>
                        <td style="padding: 2px;">
                            <span t-field="rs.service_id"/>
                        </td>
                        <td style="padding: 2px;text-align:right;">
                            <span t-field="rs.qty"/>
                        </td>
                        <td style="padding: 2px;">
                            <span t-field="rs.uom_id"/>
                        </td>
                    </tr>
                </table>
                <p>
                    <strong>Best regards</strong>
                    <br/>
                    <strong>
                        <t t-out="object.company_id.name"/>
                    </strong>
                </p>
                <hr class="mb-1 mt-1"/>
                <span>
                    <t t-out="object.company_id.name"/>
                    <br/>
                    <t t-out="object.company_id.phone"/>
                    <br/>
                    <t t-out="object.company_id.email"/>
                    <br/>
                    <t t-out="object.company_id.website"/>
                </span>
            </field>
        </record>
    </data>
</odoo>