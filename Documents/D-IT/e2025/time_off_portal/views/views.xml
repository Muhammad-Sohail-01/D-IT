<odoo>
    <!-- Define Time Off Listing Page -->
    <template id="time_off_listing_page" name="Time Off Requests">
        <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs_searchbar" t-value="True"/>

            <t t-call="portal.portal_searchbar">
                <t t-set="title">Time Off Requests</t>
            </t>

            <!-- TO DO: Add breadcrumbs -->

            <div t-if="not time_off_requests" class="alert alert-warning" role="alert">
                There are currently no time off requests.
            </div>
            <div t-if="time_off_requests" t-call="portal.portal_table">
                    <thead>
                        <tr class="active">
                            <th>Req ID</th>
                            <th>Type of Leave</th>
                            <th>Start Date</th>
                            <th>End Date</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="time_off_requests" t-as="request">
                            <tr>
                                <td><t t-esc="request.id"/></td>
                                <td><t t-esc="request.holiday_status_id.name"/></td>
                                <td><t t-esc="request.date_from"/></td>
                                <td><t t-esc="request.date_to"/></td>
                                <td><t t-esc="request.state"/></td>
                            </tr>
                        </t>
                    </tbody>
            </div>
        </t>
    </template>

    <!-- Define Time Off Details Page -->
    <template id="time_off_details_page" name="Time Off Request Details">
        <t t-call="portal.portal_layout">
            <div class="container mt-5">
                <div class="jumbotron">
                    <h1 class="display-4">Time Off Details</h1>
                    <p class="lead" t-if="not time_off_request">The requested time off details are not available.</p>
                </div>

                <div t-if="time_off_request" class="o_portal_time_off_details">
                    <div class="card mb-3">
                        <div class="card-header">
                            Request Overview
                        </div>
                        <div class="card-body">
                            <dl class="row">
                                <dt class="col-sm-3">Type of Leave</dt>
                                <dd class="col-sm-9"><t t-esc="time_off_request.holiday_status_id.name"/></dd>

                                <dt class="col-sm-3">Duration</dt>
                                <dd class="col-sm-9">
                                    <t t-esc="time_off_request.number_of_days_display"/> days
                                    (<t t-esc="time_off_request.request_date_from"/> to <t t-esc="time_off_request.request_date_to"/>)
                                </dd>

                                <dt class="col-sm-3">Status</dt>
                                <dd class="col-sm-9"><t t-esc="time_off_request.state"/></dd>

                                <dt class="col-sm-3" t-if="time_off_request.state in ['validate', 'validate1']">Approval Date</dt>
                                <dd class="col-sm-9" t-if="time_off_request.state in ['validate', 'validate1']">
                                    <t t-esc="time_off_request.write_date" t-options='{"widget": "date"}'/>
                                </dd>

                                <dt class="col-sm-3">Description</dt>
                                <dd class="col-sm-9"><t t-esc="time_off_request.name"/></dd>
                            </dl>
                        </div>
                    </div>

                    <!-- Additional Information -->
                    <div class="card">
                        <div class="card-header">
                            Additional Information
                        </div>
                        <div class="card-body">
                            <dl class="row">
                                <dt class="col-sm-3">Approval</dt>
                                <dd class="col-sm-9">
                                    First Approval: <t t-esc="time_off_request.first_approver_id.name"/><br/>
                                    Second Approval: <t t-esc="time_off_request.second_approver_id.name"/>
                                </dd>

                                <dt class="col-sm-3">Notes</dt>
                                <dd class="col-sm-9">
                                    <t t-esc="time_off_request.notes"/>
                                </dd>

                                <!-- Dynamically display attachments if any -->
                                <dt class="col-sm-3" t-if="time_off_request.attachment_ids">Attachments</dt>
                                <dd class="col-sm-9">
                                    <t t-foreach="time_off_request.attachment_ids" t-as="attachment">
                                        <a t-att-href="'/web/content/' + str(attachment.id)" t-esc="attachment.name"/><br/>
                                    </t>
                                </dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <!-- Define Time Off Form Page -->
    <template id="time_off_form_page" name="Submit Time Off Request">
        <t t-call="portal.portal_layout">
            <div class="container">
                <h2>Submit Time Off Request</h2>
                <form action="/time-off/form" method="post">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                    <div class="form-group">
                        <label for="holiday_status_id">Type of Leave:</label>
                        <select name="holiday_status_id" class="form-control" required="required">
                            <t t-foreach="request.env['hr.leave.type'].sudo().search([])" t-as="leave_type">
                                <option t-att-value="leave_type.id"><t t-esc="leave_type.name"/></option>
                            </t>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="request_date_from">Start Date:</label>
                        <input type="date" name="request_date_from" class="form-control" required="required"/>
                    </div>
                    <div class="form-group">
                        <label for="request_date_to">End Date:</label>
                        <input type="date" name="request_date_to" class="form-control" required="required"/>
                    </div>
                    <div class="form-group">
                        <label for="description">Description (Optional):</label>
                        <textarea name="description" class="form-control"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Submit Request</button>
                </form>
            </div>
        </t>
    </template>

    <!-- Time Off Menus -->

        <!-- Main "Time-Off" menu item for Website 1 -->
        <record id="time_off_menu" model="website.menu">
            <field name="name">Time-Off</field>
            <field name="url">#</field>
            <field name="sequence" type="int">2</field>
        </record>

        <!-- Sub-menu "Apply" for Website 1 -->
        <record id="apply_time_off_menu" model="website.menu">
            <field name="name">Apply</field>
            <field name="url">/time-off/form</field>
            <field name="parent_id" ref="time_off_portal.time_off_menu"/>
            <field name="sequence" type="int">1</field>
            <field name="website_id" ref="website.default_website"/>
        </record>

        <!-- Sub-menu "My Leaves" for Website 1 -->
        <record id="my_leaves_menu" model="website.menu">
            <field name="name">My Leaves</field>
            <field name="url">/time-off/listing</field>
            <field name="parent_id" ref="time_off_portal.time_off_menu"/>
            <field name="sequence" type="int">2</field>
            <field name="website_id" ref="website.default_website"/>
        </record>

</odoo>
